<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Podcatcher">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#007AFF">
    <meta http-equiv="Content-Security-Policy"
          content="default-src 'self';
                   connect-src 'self' https://itunes.apple.com https://*.apple.com https://*.mzstatic.com;
                   media-src *;
                   img-src *;
                   style-src 'self' 'unsafe-inline';
                   script-src 'self';">

    <title>Podcatcher</title>

    <link rel="apple-touch-icon" href="icon.svg">
    <link rel="icon" href="icon.svg">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body>
    <div id="app">
        <!-- Loading State -->
        <div id="loading" class="loading">
            <div class="loading-spinner"></div>
            <p>Loading Podcatcher...</p>
        </div>

        <!-- Main Content -->
        <main id="main-content" class="main-content hidden">
            <!-- Search Page -->
            <section id="search-page" class="page active">
                <header class="page-header">
                    <h1>Search Podcasts</h1>
                </header>

                <div class="search-container">
                    <div class="search-input-container">
                        <input type="text" id="search-input" placeholder="Search for podcasts..."
                               aria-label="Search for podcasts">
                        <button id="search-button" aria-label="Search">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                            </svg>
                        </button>
                    </div>
                </div>

                <div id="search-results" class="search-results" aria-live="polite">
                    <div class="empty-state">
                        <p>Search for your favorite podcasts above</p>
                    </div>
                </div>

                <!-- Podcast Detail Modal -->
                <div id="podcast-modal" class="modal hidden">
                    <div class="modal-content">
                        <header class="modal-header">
                            <button id="close-modal" class="close-button" aria-label="Close">Ã—</button>
                            <h2 id="podcast-title">Podcast Title</h2>
                        </header>
                        <div class="modal-body">
                            <div class="podcast-info">
                                <img id="podcast-artwork" src="" alt="Podcast artwork" class="podcast-artwork">
                                <div class="podcast-details">
                                    <p id="podcast-artist" class="podcast-artist"></p>
                                    <p id="podcast-description" class="podcast-description"></p>
                                </div>
                            </div>
                            <div id="episodes-list" class="episodes-list">
                                <div class="loading-episodes">
                                    <div class="loading-spinner small"></div>
                                    <p>Loading episodes...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Player Page -->
            <section id="player-page" class="page">
                <header class="page-header">
                    <h1>Now Playing</h1>
                </header>

                <div id="player-container" class="player-container">
                    <div class="no-episode">
                        <p>No episode selected</p>
                        <p class="subtitle">Search and select an episode to start listening</p>
                    </div>

                    <div id="current-episode" class="current-episode hidden">
                        <img id="episode-artwork" src="" alt="Episode artwork" class="episode-artwork">
                        <div class="episode-info">
                            <h3 id="episode-title">Episode Title</h3>
                            <p id="episode-podcast">Podcast Name</p>
                        </div>

                        <div class="player-controls">
                            <button id="skip-back" class="control-button" aria-label="Skip back 15 seconds">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M11 18V6l-8.5 6 8.5 6zm.5-6l8.5 6V6l-8.5 6z"/>
                                </svg>
                                <span class="skip-time">15</span>
                            </button>

                            <button id="play-pause" class="play-button" aria-label="Play">
                                <svg id="play-icon" width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                                    <polygon points="5,3 19,12 5,21"></polygon>
                                </svg>
                                <svg id="pause-icon" width="32" height="32" viewBox="0 0 24 24" fill="currentColor" class="hidden">
                                    <rect x="6" y="4" width="4" height="16"></rect>
                                    <rect x="14" y="4" width="4" height="16"></rect>
                                </svg>
                            </button>

                            <button id="skip-forward" class="control-button" aria-label="Skip forward 30 seconds">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M4 18l8.5-6L4 6v12zm9-12v12l8.5-6L13 6z"/>
                                </svg>
                                <span class="skip-time">30</span>
                            </button>
                        </div>

                        <div class="progress-container">
                            <span id="current-time">0:00</span>
                            <div class="progress-bar-container">
                                <input type="range" id="progress-bar" min="0" max="100" value="0"
                                       class="progress-bar" aria-label="Seek position">
                            </div>
                            <span id="total-time">0:00</span>
                        </div>
                    </div>

                    <audio id="audio-player" preload="none" crossorigin="anonymous"></audio>
                </div>
            </section>

            <!-- About Page -->
            <section id="about-page" class="page">
                <header class="page-header">
                    <h1>About</h1>
                </header>

                <div class="about-content">
                    <div class="app-info">
                        <img src="icon.svg" alt="Podcatcher logo" class="app-logo">
                        <h2>Podcatcher</h2>
                        <p class="version">Version 1.0.0</p>
                    </div>

                    <div class="info-section">
                        <h3>About This App</h3>
                        <p>Podcatcher is a simple and elegant podcast player for iOS. Search for your favorite podcasts and enjoy listening to episodes with our clean, intuitive interface.</p>
                    </div>

                    <div class="info-section">
                        <h3>Features</h3>
                        <ul>
                            <li>Search thousands of podcasts</li>
                            <li>Stream episodes directly</li>
                            <li>Simple audio controls</li>
                            <li>Works offline as a PWA</li>
                        </ul>
                    </div>

                    <div class="info-section">
                        <h3>Data Source</h3>
                        <p>Podcast data provided by the iTunes Search API. All content is owned by respective podcast creators and distributors.</p>
                    </div>

                    <div class="info-section">
                        <h3>Privacy</h3>
                        <p>This app does not collect or store any personal data. All searches and playback are handled locally on your device.</p>
                    </div>
                </div>
            </section>
        </main>

        <!-- Bottom Navigation -->
        <nav id="bottom-nav" class="bottom-nav hidden">
            <button id="search-tab" class="nav-tab active" data-page="search-page" aria-label="Search">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"></circle>
                    <path d="m21 21-4.35-4.35"></path>
                </svg>
                <span>Search</span>
            </button>

            <button id="player-tab" class="nav-tab" data-page="player-page" aria-label="Player">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polygon points="5,3 19,12 5,21"></polygon>
                </svg>
                <span>Player</span>
            </button>

            <button id="about-tab" class="nav-tab" data-page="about-page" aria-label="About">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                    <line x1="12" y1="17" x2="12.01" y2="17"></line>
                </svg>
                <span>About</span>
            </button>
        </nav>
    </div>

    <script src="js/utils.js"></script>
    <script src="js/api.js"></script>
    <script src="js/player.js"></script>
    <script src="js/app.js"></script>
</body>
</html>